#Configs to staging tables
# ddl should contain the table definition
# columns should map the table column to the file column and its data type
tables:
  historical_data_sp500:
    ddl: |
      CREATE TABLE IF NOT EXISTS {{schema}}.historical_data_sp500 (
          date DATE NOT NULL,
          ticker VARCHAR(10) NOT NULL,
          open_price DECIMAL(12,4),
          high_price DECIMAL(12,4),
          low_price DECIMAL(12,4),
          close_price DECIMAL(12,4),
          volume BIGINT,
          load_timestamp TIMESTAMP WITH TIME ZONE,
          file_name VARCHAR(255)
      );
    columns:
      date:
        csv_col: date
        df_dtype: str
      ticker:
        csv_col: ticker
        df_dtype: str
      open_price:
        csv_col: open
        df_dtype: float
      high_price:
        csv_col: high
        df_dtype: float
      low_price:
        csv_col: low
        df_dtype: float
      close_price:
        csv_col: close
        df_dtype: float
      volume:
        csv_col: volume
        df_dtype: int
  index_holdings:
    ddl: |
      CREATE TABLE IF NOT EXISTS {{schema}}.index_holdings (
      index VARCHAR(20) NOT NULL,
      ticker VARCHAR(20) NOT NULL,
      name VARCHAR(100),
      sector VARCHAR(100),
      asset_class VARCHAR(100),
      market_value DECIMAL(20,2),
      weight_percent DECIMAL(6,2),
      notional_value DECIMAL(20,2),
      quantity DECIMAL(20,2),
      price DECIMAL(20,4),
      location VARCHAR(50),
      exchange VARCHAR(100),
      market_currency VARCHAR(10),
      file_name VARCHAR(200),
      load_timestamp TIMESTAMP WITH TIME ZONE
      );
    columns:
      index:
        csv_col: index
        df_dtype: str
      ticker:
        csv_col: ticker
        df_dtype: str
      name:
        csv_col: name
        df_dtype: str
      sector:
        csv_col: sector
        df_dtype: str
      asset_class:
        csv_col: asset class
        df_dtype: str
      market_value:
        csv_col: market value
        df_dtype: float
      weight_percent:
        csv_col: weight (%)
        df_dtype: float
      notional_value:
        csv_col: notional value
        df_dtype: float
      quantity:
        csv_col: quantity
        df_dtype: float
      price:
        csv_col: price
        df_dtype: float
      location:
        csv_col: location
        df_dtype: str
      exchange:
        csv_col: exchange
        df_dtype: str
      market_currency:
        csv_col: market currency
        df_dtype: str
